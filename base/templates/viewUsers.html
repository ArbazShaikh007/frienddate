{% extends 'layout.html' %}
{% block content %}
<div class="card" >
    <div class="card-body">
        <div class="table-responsive table-card">
            <table class="table table-nowrap table-striped-columns mb-0">
                <thead class="table-light">
                    <tr>
{#                        <th scope="col">Id</th>#}
{#                        <th scope="col">Profile Pic</th>#}
                                                <th class="align-center text-center" scope="col" >Sr No.</th>

                        <th class="align-center text-center" scope="col" >Full Name</th>
                        <th class="align-center text-center" scope="col" >Gender</th>

                        <th class="align-center text-center" scope="col" >Email</th>
                                                <th class="align-center text-center" scope="col" >Phone Number</th>

                        <th class="align-center text-center" scope="col" >Image</th>
                        <th class="align-center text-center" scope="col" >Created Time</th>

                        <th class="align-center text-center" scope="col" >Action</th>
                    </tr>
                </thead>
                <tbody >
                    {% for user in user_data %}
                    <tr>

{#                        <td><a href="#" class="fw-semibold">{{user.id}}</a></td>#}
                                                                <td class="align-center text-center" width="70px" >{{loop.index}}</td>

                                            <td class="align-center text-center" >{{user.fullname}}</td>
                                                                <td class="align-center text-center">{{user.gender}}</td>

                    <td class="align-center text-center" >{{user.email}}</td>
                                        <td class="align-center text-center" >{{user.phonenumber}}</td>


                        <td class="d-flex justify-content-center">
                            <div class="avatar-group">
                                <div class="avatar-group-item">
                                    <img src="{{user.image_path}}{{user.image_name}}" alt="" class="rounded-circle avatar-xs">
                                </div>
                            </div>
                        </td>
                                        <td class="align-center text-center" >{{user.created_time}}</td>


{#                        <td>{{user.grade}}</td>#}
                        <td  class="align-center text-center" >
                        <div class="remove">
                                                            <button

                                                                    class="btn btn-outline-danger"
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#blockModal{{ user.id }}"

                                                            >
                                                               {% if user.is_block == 0 %}BLOCK{% else %}UNBLOCK{% endif %}
                                                            </button>


{#                            <a  href="{{url_for('admin_views.block_user',userId=user.id)}}" class="btn btn-outline-danger">{% if user.is_block == 0 %}BLOCK{% else %}UNBLOCK{% endif %}</a>#}
                        </div>
                        <div class="modal fade" id="blockModal{{ user.id }}"
                                                                 tabindex="-1" aria-labelledby="exampleModalLabel"
                                                                 aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <button type="button" class="btn-close"
                                                                                    data-bs-dismiss="modal"
                                                                                    aria-label="Close"
                                                                                    id="btn-close"></button>
                                                                        </div>
                                                                        <form method="POST"
                                                                              action="{{ url_for('admin_views.block_user',id=user.id) }}">

                                                                            <div class="modal-body">
                                                                                <div class="mt-2 text-center">
                                                                                    <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop" colors="primary:#f7b84b,secondary:#f06548" style="width: 100px; height: 100px"></lord-icon>
                                                                                    <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
{#                                                                                        <h4>Are you Sure ?</h4>#}
                                                                                        {% if user.is_block == 0 %}
                                                                                        <p class="text-muted mx-4 mb-0">
                                                                                            Are You Sure You Want
                                                                                        </p>
                                                                                        <p class="text-muted mx-4 mb-0">To Block This User?</p>
                                                                                        {% else %}
                                                                                        <p class="text-muted mx-4 mb-0">
                                                                                            You Want
                                                                                        </p>
                                                                                        <p class="text-muted mx-4 mb-0">To Unblock This User?</p>{% endif %}

                                                                                    </div>
                                                                                </div>
                                                                                <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
                                                                                    <button type="button"
                                                                                            class="btn w-sm btn-light"
                                                                                            data-bs-dismiss="modal">
                                                                                        Close
                                                                                    </button>
                                                                                    {% if user.is_block == 0 %}
                                                                                    <button type="submit"
                                                                                            class="btn w-sm btn-danger"
                                                                                            id="delete-record">
                                                                                        Yes, Block It!
                                                                                    </button>
                                                                                    {% else %}
                                                                                    <button type="submit"
                                                                                            class="btn w-sm btn-danger"
                                                                                            id="delete-record">
                                                                                        Yes, Unblock It!
                                                                                    </button>{% endif %}
                                                                                </div>
                                                                                </div>
                                                                        </form>
                                                        </div>
                                                    </div>
                                                            </div>

                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        <br>
{#            <div class="d-flex justify-content">#}
            <div class="d-flex justify-content-between me-4 ms-4"> <p>
                     Showing page {{ user_data.page }} of {{ user_data.pages }} &nbsp;&nbsp; </p>
{#</div>#}
{#            <div class="d-flex justify-content-end">#}
                <div class="pagination-wrap hstack gap-2">

                        {% if user_data.page == 1 %}
                        <a href="#"
                            class="page-item pagination-prev disabled">
                            Prev
                        </a>
                        {% else %}
                        <a href="{{ url_for('admin_views.view_users', page=user_data.prev_num) }}"
                            class="page-item pagination-prev">
                            Prev
                        </a>
                        {% endif %}

                        <ul class="pagination listjs-pagination mb-0">

                            {% for page_num in user_data.iter_pages(left_edge=1, right_edge=1, left_current=1,
                            right_current=2) %}
                            {% if page_num %}

                            {% if user_data.page == page_num %}


                            <li class="active"> <a class="page"
                                    href="{{ url_for('admin_views.view_users',page=page_num) }}">
                                    {{ page_num }}
                                </a></li>
                            {% else %}
                            <li><a class="page"
                                    href="{{ url_for('admin_views.view_users', page=page_num) }}">
                                    {{ page_num }}
                                </a></li>
                            {% endif %}
                            {% else %}
                            ...
                            {% endif %}


                            {% endfor %}
                        </ul>
                        {% if user_data.page == user_data.pages %}
                        <a href="#" class="page-item pagination-next disabled">Next</a>
                        {%  else %}
                        <a href="{{ url_for('admin_views.view_users', page=user_data.next_num) }}"
                            class="page-item pagination-next">Next</a>
                        {% endif %}

                                           </div>
                </div>
            </div>
        </div>
    </div>

{% endblock content %}